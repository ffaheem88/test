/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication11;

import java.util.Arrays;

/**
 *
 * @author ffahe
 */
public class Splt {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        String content = "<html> <head> <meta charset='utf-8'> <meta name='viewport' content='width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0'> <style> body { overflow : hidden; padding : 0; margin : 0; } #container { position: relative; width : 100%; height : 50%; overflow : hidden; padding : 0; margin : 0; -webkit-user-select : none; -moz-user-select : none; } #image2 { position: relative; width : 100%; height : 50%; overflow : hidden; padding : 0; margin : 0; -webkit-user-select : none; -moz-user-select : none; } #myButton1 { width: 100%; /* Width of the outside container */ } #slidecontainer { width: 100%; /* Width of the outside container */ } .slider { -webkit-appearance: none; width: 98%; height: 15px; border-radius: 5px; background: #d3d3d3; outline: none; opacity: 0.7; -webkit-transition: .2s; transition: opacity .2s; } .slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 25px; height: 25px; border-radius: 50%; background: #4CAF50; cursor: pointer; } .slider::-moz-range-thumb { width: 25px; height: 25px; border-radius: 50%; background: #4CAF50; cursor: pointer; } </style> </head> <body> <div id='container'></div> <input type='range' min='590' max='1023' value='800' id='speed' class='slider'> <iframe id='image' src='http://192.168.4.2/stream' class='container' style='width:100%;height:100%'alt='Camera Unavailable'></iframe> <script> var x=0,VirtualJoystick=function(t){t=t||{},this._container=t.container||document.body,this._strokeStyle=t.strokeStyle||'cyan',this._stickEl=t.stickElement||this._buildJoystickStick(),this._baseEl=t.baseElement||this._buildJoystickBase(),this._mouseSupport=void 0!==t.mouseSupport?t.mouseSupport:!1,this._stationaryBase=t.stationaryBase||!1,this._baseX=this._stickX=t.baseX||0,this._baseY=this._stickY=t.baseY||0,this._limitStickTravel=t.limitStickTravel||!1,this._stickRadius=void 0!==t.stickRadius?t.stickRadius:100,this._useCssTransform=void 0!==t.useCssTransform?t.useCssTransform:!1,this._container.style.position='relative',this._container.appendChild(this._baseEl),this._baseEl.style.position='absolute',this._baseEl.style.display='none',this._container.appendChild(this._stickEl),this._stickEl.style.position='absolute',this._stickEl.style.display='none',this._pressed=!1,this._touchIdx=null,this._stationaryBase===!0&&(this._baseEl.style.display='',this._baseEl.style.left=this._baseX-this._baseEl.width/2+'px',this._baseEl.style.top=this._baseY-this._baseEl.height/2+'px'),this._transform=this._useCssTransform?this._getTransformProperty():!1,this._has3d=this._check3D();var s=function(t,s){return function(){return t.apply(s,arguments)}};this._$onTouchStart=s(this._onTouchStart,this),this._$onTouchEnd=s(this._onTouchEnd,this),this._$onTouchMove=s(this._onTouchMove,this),this._container.addEventListener('touchstart',this._$onTouchStart,!1),this._container.addEventListener('touchend',this._$onTouchEnd,!1),this._container.addEventListener('touchmove',this._$onTouchMove,!1),this._mouseSupport&&(this._$onMouseDown=s(this._onMouseDown,this),this._$onMouseUp=s(this._onMouseUp,this),this._$onMouseMove=s(this._onMouseMove,this),this._container.addEventListener('mousedown',this._$onMouseDown,!1),this._container.addEventListener('mouseup',this._$onMouseUp,!1),this._container.addEventListener('mousemove',this._$onMouseMove,!1))};VirtualJoystick.prototype.destroy=function(){this._container.removeChild(this._baseEl),this._container.removeChild(this._stickEl),this._container.removeEventListener('touchstart',this._$onTouchStart,!1),this._container.removeEventListener('touchend',this._$onTouchEnd,!1),this._container.removeEventListener('touchmove',this._$onTouchMove,!1),this._mouseSupport&&(this._container.removeEventListener('mouseup',this._$onMouseUp,!1),this._container.removeEventListener('mousedown',this._$onMouseDown,!1),this._container.removeEventListener('mousemove',this._$onMouseMove,!1))},VirtualJoystick.touchScreenAvailable=function(){return'createTouch'in document?!0:!1},function(t){t.addEventListener=function(t,s){return void 0===this._events&&(this._events={}),this._events[t]=this._events[t]||[],this._events[t].push(s),s},t.removeEventListener=function(t,s){void 0===this._events&&(this._events={}),t in this._events!=!1&&this._events[t].splice(this._events[t].indexOf(s),1)},t.dispatchEvent=function(t){if(void 0===this._events&&(this._events={}),void 0!==this._events[t]){for(var s=this._events[t].slice(),e=0;e<s.length;e++){var i=s[e].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==i)return i}return void 0}}}(VirtualJoystick.prototype),VirtualJoystick.prototype.deltaX=function(){return this._stickX-this._baseX},VirtualJoystick.prototype.deltaY=function(){return this._stickY-this._baseY},VirtualJoystick.prototype.up=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return s>=0?!1:Math.abs(t)>2*Math.abs(s)?!1:!0},VirtualJoystick.prototype.down=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return 0>=s?!1:Math.abs(t)>2*Math.abs(s)?!1:!0},VirtualJoystick.prototype.right=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return 0>=t?!1:Math.abs(s)>2*Math.abs(t)?!1:!0},VirtualJoystick.prototype.left=function(){if(this._pressed===!1)return!1;var t=this.deltaX(),s=this.deltaY();return t>=0?!1:Math.abs(s)>2*Math.abs(t)?!1:!0},VirtualJoystick.prototype._onUp=function(){this._pressed=!1,this._stickEl.style.display='none',0==this._stationaryBase&&(this._baseEl.style.display='none',this._baseX=this._baseY=0,this._stickX=this._stickY=0)},VirtualJoystick.prototype._onDown=function(t,s){if(this._pressed=!0,0==this._stationaryBase&&(this._baseX=t,this._baseY=s,this._baseEl.style.display='',this._move(this._baseEl.style,this._baseX-this._baseEl.width/2,this._baseY-this._baseEl.height/2)),this._stickX=t,this._stickY=s,this._limitStickTravel===!0){var e=this.deltaX(),i=this.deltaY(),o=Math.sqrt(e*e+i*i);if(o>this._stickRadius){var n=e/o,a=i/o;this._stickX=n*this._stickRadius+this._baseX,this._stickY=a*this._stickRadius+this._baseY}}this._stickEl.style.display='',this._move(this._stickEl.style,this._stickX-this._stickEl.width/2,this._stickY-this._stickEl.height/2)},VirtualJoystick.prototype._onMove=function(t,s){if(this._pressed===!0){if(this._stickX=t,this._stickY=s,this._limitStickTravel===!0){var e=this.deltaX(),i=this.deltaY(),o=Math.sqrt(e*e+i*i);if(o>this._stickRadius){var n=e/o,a=i/o;this._stickX=n*this._stickRadius+this._baseX,this._stickY=a*this._stickRadius+this._baseY}}this._move(this._stickEl.style,this._stickX-this._stickEl.width/2,this._stickY-this._stickEl.height/2)}},VirtualJoystick.prototype._onMouseUp=function(t){return this._onUp()},VirtualJoystick.prototype._onMouseDown=function(t){t.preventDefault();var s=t.clientX,e=t.clientY;return this._onDown(s,e)},VirtualJoystick.prototype._onMouseMove=function(t){var s=t.clientX,e=t.clientY;return this._onMove(s,e)},VirtualJoystick.prototype._onTouchStart=function(t){if(null===this._touchIdx){var s=this.dispatchEvent('touchStartValidation',t);if(s!==!1){this.dispatchEvent('touchStart',t),t.preventDefault();var e=t.changedTouches[0];this._touchIdx=e.identifier;var i=e.pageX,o=e.pageY;return this._onDown(i,o)}}},VirtualJoystick.prototype._onTouchEnd=function(t){if(null!==this._touchIdx){this.dispatchEvent('touchEnd',t);for(var s=t.changedTouches,e=0;e<s.length&&s[e].identifier!==this._touchIdx;e++);if(e!==s.length)return this._touchIdx=null,t.preventDefault(),this._onUp()}},VirtualJoystick.prototype._onTouchMove=function(t){if(null!==this._touchIdx){for(var s=t.changedTouches,e=0;e<s.length&&s[e].identifier!==this._touchIdx;e++);if(e!==s.length){var i=s[e];t.preventDefault();var o=i.pageX,n=i.pageY;return this._onMove(o,n)}}},VirtualJoystick.prototype._buildJoystickBase=function(){var t=document.createElement('canvas');t.width=126,t.height=126;var s=t.getContext('2d');return s.beginPath(),s.strokeStyle=this._strokeStyle,s.lineWidth=6,s.arc(t.width/2,t.width/2,40,0,2*Math.PI,!0),s.stroke(),s.beginPath(),s.strokeStyle=this._strokeStyle,s.lineWidth=2,s.arc(t.width/2,t.width/2,60,0,2*Math.PI,!0),s.stroke(),t},VirtualJoystick.prototype._buildJoystickStick=function(){var t=document.createElement('canvas');t.width=86,t.height=86;var s=t.getContext('2d');return s.beginPath(),s.strokeStyle=this._strokeStyle,s.lineWidth=6,s.arc(t.width/2,t.width/2,40,0,2*Math.PI,!0),s.stroke(),t},VirtualJoystick.prototype._move=function(t,s,e){this._transform?this._has3d?t[this._transform]='translate3d('+s+'px,'+e+'px, 0)':t[this._transform]='translate('+s+'px,'+e+'px)':(t.left=s+'px',t.top=e+'px')},VirtualJoystick.prototype._getTransformProperty=function(){for(var t,s=['webkitTransform','MozTransform','msTransform','OTransform','transform'],e=document.createElement('p'),i=0;i<s.length;i++)if(t=s[i],null!=e.style[t])return t},VirtualJoystick.prototype._check3D=function(){var t=this._getTransformProperty();if(!t||!window.getComputedStyle)return module.exports=!1;var s={webkitTransform:'-webkit-transform',OTransform:'-o-transform',msTransform:'-ms-transform',MozTransform:'-moz-transform',transform:'transform'},e=document.createElement('div');e.style[t]='translate3d(1px,1px,1px)',document.body.insertBefore(e,null);var i=getComputedStyle(e).getPropertyValue(s[t]);document.body.removeChild(e);var o=null!=i&&i.length&&'none'!=i;return o};var connection;connection=new WebSocket('ws://192.168.4.1:81/'),connection.onopen=function(){};var state=0;connection.onmessage=function(t){},console.log('touchscreen is',VirtualJoystick.touchScreenAvailable()?'available':'not available');var joystick=new VirtualJoystick({container:document.getElementById('container'),mouseSupport:!0});joystick.addEventListener('touchStart',function(){console.log('down')}),joystick.addEventListener('touchEnd',function(){console.log('up')}),setInterval(function(){var t=document.getElementById('speed').value;Math.round(joystick.deltaY())<-60&&Math.round(joystick.deltaX())<60&&Math.round(joystick.deltaX())>-60?1!==state&&(connection.send(';for;'+t+';'),connection.send('stopturn'),state=1):Math.round(joystick.deltaY())>60&&Math.round(joystick.deltaX())<60&&Math.round(joystick.deltaX())>-60?2!==state&&(connection.send(';back;'+t+';'),connection.send('stopturn'),state=2):Math.round(joystick.deltaY())<60&&Math.round(joystick.deltaY())>-60&&Math.round(joystick.deltaX())<60&&Math.round(joystick.deltaX())>-60?0!==state&&(connection.send('stopall'),state=0):Math.round(joystick.deltaY())>60&&Math.round(joystick.deltaX())>60?3!==state&&(connection.send(';backright;'+t+';'),state=3):Math.round(joystick.deltaY())>60&&Math.round(joystick.deltaX())<-60?4!==state&&(connection.send(';backleft;'+t+';'),state=4):Math.round(joystick.deltaY())<-60&&Math.round(joystick.deltaX())<-60?5!==state&&(connection.send(';forleft;'+t+';'),state=5):Math.round(joystick.deltaY())<-60&&Math.round(joystick.deltaX())>60&&6!==state&&(connection.send(';forright;'+t+';'),state=6)},100); </script> </body> </html>";
        String code = "server.setContentLength("+content.length()+");";
        int x= 0;
        int len = 200;
        while(content.length() > len) {
    System.out.println("static const char mnm"+x+"[] PROGMEM=\""+content.substring(0, len)+"\";");
    content = content.substring(len);
    System.out.println();
    x++;
}
        

        System.out.println("static const char mnm"+x+"[] PROGMEM=\""+content+"\";");
        System.out.println();
        System.out.println(code);
        System.out.println();
        System.out.println("server.send(200,\"text/html\",FPSTR(mnm0));");
        System.out.println();
        for(int i =1;i<x+1;i++){
            System.out.println("server.sendContent(FPSTR(mnm"+i+"));");
            System.out.println();
        }
        
    }
    
}
